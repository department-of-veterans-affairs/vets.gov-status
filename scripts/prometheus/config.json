{
 "reports": [
    {
      "query": {
        "endpoint": "PROMETHEUS_API_UTILITY",
        "endpoint_path": "/query_range",
        "params": {
          "query": "round(sum(changes(default_jenkins_builds_duration_milliseconds_summary_sum{exported_job=\"deploys/vets-api-prod\"}[24h]))) + round(sum(delta(default_jenkins_builds_duration_milliseconds_summary_count{exported_job=\"testing/vets-website/production\"}[24h])))",
          "days_back": 14,
          "step": "24h"
        }
      },
      "path": "deployments_daily.csv"
    },
    {
      "query": {
        "endpoint": "PROMETHEUS_API_UTILITY",
        "endpoint_path": "/query",
        "params": {
          "query": "round(sum(changes(default_jenkins_builds_duration_milliseconds_summary_sum{exported_job=\"deploys/vets-api-prod\"}[2w]))) * 2"
        }
      },
      "path": "deployments_monthly.csv"
    },
    {
      "query": {
        "endpoint": "PROMETHEUS_API_SITE",
        "endpoint_path": "/query_range",
        "params": {
          "query": "sum(rate(nginx_http_request_total{status=~\"5..\"}[24h])) / sum(rate(nginx_http_request_total[24h]))",
          "days_back": 14,
          "step": "24h"
        }
      },
      "path": "error_rate.csv"
    },
    {
      "query": {
        "endpoint": "PROMETHEUS_API_SITE",
        "endpoint_path": "/query_range",
        "params": {
          "query": "avg(avg_over_time(probe_success{job=\"site\"}[24h]))",
          "days_back": 14,
          "step": "24h"
        }
      },
      "path": "reachability.csv"
    }
  ]
}
